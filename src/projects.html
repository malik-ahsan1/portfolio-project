<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Carousel with GSAP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/InertiaPlugin.min.js"></script>
    <style>
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .carousel-slide {
            transition: transform 0.3s ease;
        }

        .bullet {
            transition: all 0.3s ease;
        }

        .bullet.active {
            background-color: #ffffff;
            transform: scale(1.2);
        }

        .project-info {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.3);
        }
    </style>
</head>

<body class="bg-black text-white min-h-screen">
    <div class="relative h-screen w-full overflow-hidden">
        <!-- Carousel container -->
        <div class="carousel-container h-full w-full relative" id="carousel-container">
            <div class="carousel-track flex h-full" id="carousel-track">
                <!-- Project 1 - KAPSUL -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="0">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/Kapsul.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">KAPSUL</h2>
                        <p class="text-sm opacity-80">WEB DESIGN + BRAND CAMPAIGN</p>
                    </div>
                </div>

                <!-- Project 2 - LING LING -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="1">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/LingLing.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">LING LING</h2>
                        <p class="text-sm opacity-80">BRAND CAMPAIGN</p>
                    </div>
                </div>

                <!-- Project 3 - VISTRIA -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="2">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/Vistria.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">VISTRIA</h2>
                        <p class="text-sm opacity-80">WEB DESIGN</p>
                    </div>
                </div>

                <!-- Project 4 - TAYLORMADE -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="3">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/Taylormade.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">TAYLORMADE</h2>
                        <p class="text-sm opacity-80">PRODUCT DESIGN + WEB DESIGN</p>
                    </div>
                </div>

                <!-- Project 5 - LING LING 2 -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="4">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/LingLing-2.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">LING LING</h2>
                        <p class="text-sm opacity-80">ANIMATED VIDEO + WEB DESIGN</p>
                    </div>
                </div>

                <!-- Project 6 - IRVINE COMPANY -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="5">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/Irvine.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">IRVINE COMPANY</h2>
                        <p class="text-sm opacity-80">PRODUCT DESIGN + WEB DESIGN</p>
                    </div>
                </div>

                <!-- Project 7 - FOUR SIGMATIC -->
                <div class="carousel-slide min-w-full h-full flex items-center justify-center relative" data-index="6">
                    <div class="project-image w-[90vw] h-[60vh] rounded-2xl bg-cover bg-center relative overflow-hidden"
                        style="background-image: url('./../assets/images/Four_Sigmatic.jpg');">
                    </div>
                    <div
                        class="project-info absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center px-6 py-4 rounded-xl">
                        <h2 class="text-2xl font-medium mb-2">FOUR SIGMATIC</h2>
                        <p class="text-sm opacity-80">WEB DESIGN + BRAND EVOLUTION</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bullet Navigation -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-3" id="bullet-container">
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer active" data-index="0"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="1"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="2"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="3"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="4"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="5"></div>
            <div class="bullet w-2 h-2 rounded-full bg-white/40 cursor-pointer" data-index="6"></div>
        </div>
    </div>

    <script>
        class MobileCarousel {
            constructor() {
                this.currentIndex = 0;
                this.totalSlides = 7;
                this.isAnimating = false;
                this.threshold = 50; // Minimum distance for swipe
                this.snapThreshold = 0.3; // Threshold for snapping to next/prev slide

                this.track = document.getElementById('carousel-track');
                this.container = document.getElementById('carousel-container');
                this.bullets = document.querySelectorAll('.bullet');
                this.slides = document.querySelectorAll('.carousel-slide');

                this.init();
            }

            init() {
                this.setupGSAP();
                this.setupEventListeners();
                this.updateUI();
                this.animateInitialLoad();
            }

            setupGSAP() {
                // Set initial position
                gsap.set(this.track, { x: 0 });

                // Create draggable instance
                this.draggable = Draggable.create(this.track, {
                    type: "x",
                    bounds: {
                        minX: -(this.totalSlides - 1) * window.innerWidth,
                        maxX: 0
                    },
                    inertia: true,
                    snap: {
                        x: (value) => {
                            return Math.round(value / window.innerWidth) * window.innerWidth;
                        }
                    },
                    onDrag: () => {
                        this.updateCurrentIndex();
                    },
                    onThrowUpdate: () => {
                        this.updateCurrentIndex();
                    },
                    onDragEnd: () => {
                        this.handleDragEnd();
                    }
                })[0];
            }

            setupEventListeners() {
                // Bullet navigation
                this.bullets.forEach((bullet, index) => {
                    bullet.addEventListener('click', () => {
                        this.goToSlide(index);
                    });
                });

                // Touch events for better mobile experience
                let startX = 0;
                let startY = 0;
                let startTime = 0;

                this.container.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    startTime = Date.now();
                }, { passive: true });

                this.container.addEventListener('touchend', (e) => {
                    if (this.isAnimating) return;

                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    const endTime = Date.now();

                    const deltaX = endX - startX;
                    const deltaY = endY - startY;
                    const deltaTime = endTime - startTime;

                    // Check if it's a horizontal swipe
                    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > this.threshold) {
                        const velocity = Math.abs(deltaX) / deltaTime;

                        if (velocity > 0.5 || Math.abs(deltaX) > window.innerWidth * this.snapThreshold) {
                            if (deltaX > 0 && this.currentIndex > 0) {
                                this.goToSlide(this.currentIndex - 1);
                            } else if (deltaX < 0 && this.currentIndex < this.totalSlides - 1) {
                                this.goToSlide(this.currentIndex + 1);
                            }
                        } else {
                            // Snap back to current slide
                            this.snapToCurrentSlide();
                        }
                    }
                }, { passive: true });

                // Resize handler
                window.addEventListener('resize', () => {
                    this.updateBounds();
                    this.goToSlide(this.currentIndex, false);
                });
            }

            updateCurrentIndex() {
                const trackX = gsap.getProperty(this.track, "x");
                this.currentIndex = Math.round(-trackX / window.innerWidth);
                this.currentIndex = Math.max(0, Math.min(this.currentIndex, this.totalSlides - 1));
            }

            handleDragEnd() {
                this.updateCurrentIndex();
                this.updateUI();
                this.animateSlideContent();
            }

            goToSlide(index, animate = true) {
                if (this.isAnimating || index === this.currentIndex) return;

                this.isAnimating = true;
                this.currentIndex = index;

                const targetX = -index * window.innerWidth;

                if (animate) {
                    gsap.to(this.track, {
                        x: targetX,
                        duration: 0.6,
                        ease: "power2.out",
                        onComplete: () => {
                            this.isAnimating = false;
                            this.animateSlideContent();
                        }
                    });
                } else {
                    gsap.set(this.track, { x: targetX });
                    this.isAnimating = false;
                }

                this.updateUI();
            }

            snapToCurrentSlide() {
                const targetX = -this.currentIndex * window.innerWidth;

                gsap.to(this.track, {
                    x: targetX,
                    duration: 0.4,
                    ease: "power2.out"
                });
            }

            updateUI() {
                // Update bullets
                this.bullets.forEach((bullet, index) => {
                    bullet.classList.toggle('active', index === this.currentIndex);
                });

                // Animate bullets
                gsap.to(this.bullets[this.currentIndex], {
                    scale: 1.2,
                    duration: 0.3,
                    ease: "power2.out"
                });

                this.bullets.forEach((bullet, index) => {
                    if (index !== this.currentIndex) {
                        gsap.to(bullet, {
                            scale: 1,
                            duration: 0.3,
                            ease: "power2.out"
                        });
                    }
                });
            }

            animateSlideContent() {
                const currentSlide = this.slides[this.currentIndex];
                const nextSlide = this.slides[(this.currentIndex + 1) % this.totalSlides];
                const prevSlide = this.slides[(this.currentIndex - 1 + this.totalSlides) % this.totalSlides];
                const projectImage = currentSlide.querySelector('.project-image');
                const projectInfo = currentSlide.querySelector('.project-info');

                gsap.set(nextSlide.querySelector('.project-image'), {
                    scale: 1.1,
                    opacity: 0.8
                });

                gsap.set(nextSlide.querySelector('.project-info'), {
                    y: 30,
                    opacity: 0
                });

                gsap.set(prevSlide.querySelector('.project-image'), {
                    scale: 1.1,
                    opacity: 0.8
                });

                gsap.set(prevSlide.querySelector('.project-info'), {
                    y: 30,
                    opacity: 0
                });

                // Reset and animate project image
                gsap.to(projectImage,
                    {
                        scale: 1,
                        opacity: 1,
                        duration: 0.8,
                        ease: "power2.out"
                    }
                );

                // Animate project info
                gsap.to(projectInfo,
                    {
                        y: 0,
                        opacity: 1,
                        duration: 0.6,
                        delay: 0.2,
                        ease: "power2.out"
                    }
                );
            }

            animateInitialLoad() {
                // Animate first slide on load
                gsap.fromTo(this.slides[0].querySelector('.project-image'),
                    {
                        scale: 1.2,
                        opacity: 0
                    },
                    {
                        scale: 1,
                        opacity: 1,
                        duration: 1,
                        ease: "power2.out"
                    }
                );

                gsap.fromTo(this.slides[0].querySelector('.project-info'),
                    {
                        y: 50,
                        opacity: 0
                    },
                    {
                        y: 0,
                        opacity: 1,
                        duration: 0.8,
                        delay: 0.3,
                        ease: "power2.out"
                    }
                );

                // Animate bullets
                gsap.fromTo(this.bullets,
                    {
                        scale: 0,
                        opacity: 0
                    },
                    {
                        scale: 1,
                        opacity: 1,
                        duration: 0.5,
                        delay: 0.5,
                        stagger: 0.1,
                        ease: "back.out(1.7)"
                    }
                );
            }

            updateBounds() {
                this.draggable.vars.bounds.minX = -(this.totalSlides - 1) * window.innerWidth;
                this.draggable.update();
            }
        }

        // Initialize carousel when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new MobileCarousel();
        });
    </script>
</body>

</html>